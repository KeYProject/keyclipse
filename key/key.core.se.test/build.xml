<?xml version="1.0"?>
<project name="key.core.se.test" default="compile" basedir=".">
	<property name="src.dir"   value="${basedir}/src" />
	<property name="build.dir" value="${basedir}/bin" />
	<property name="dist.dir"  value="${basedir}/../deployment" />

	<target name="runTests" depends="compile">
		<junit printsummary="yes" haltonfailure="yes" haltonerror="yes" showoutput="yes" dir="${basedir}">
			<jvmarg value="-Xmx2048m"/>
			<jvmarg value="-XX:MaxPermSize=256m"/>
			<jvmarg value="-ea"/>
			<classpath>
				<pathelement path="${build.dir}"/>
				<pathelement location="${dist.dir}/key.core.se.jar"/>
				<pathelement path="${basedir}/../key.core.test/bin"/>
				<pathelement location="${dist.dir}/key.core.jar"/>
				<pathelement path="${basedir}/../key.util.test/bin"/>
				<pathelement location="${dist.dir}/key.util.jar"/>
				<pathelement location="${basedir}/../key.util.test/lib/junit-4.12.jar"/>
				<pathelement location="${basedir}/../key.util.test/lib/hamcrest-core-1.3.jar"/>
			</classpath>
			<test name="de.uka.ilkd.key.symbolic_execution.suite.AllSETests" />
		</junit>
	</target>

	<target name="compile" description="Compile all source files into the build directory.">
		<mkdir dir="${build.dir}"/>
		<javac srcdir= "${src.dir}" 
		       destdir="${build.dir}" 
		       sourcepath="${src.dir}" 
		       includeantruntime="false" 
		       source="1.7" 
		       deprecation="off" 
		       debug="on" 
		       depend="${build.depend}" 
		       optimize="off">
			<classpath>
				<pathelement location="${dist.dir}/key.core.se.jar"/>
				<pathelement path="${basedir}/../key.core.test/bin"/>
				<pathelement location="${dist.dir}/key.core.jar"/>
				<pathelement path="${basedir}/../key.util.test/bin"/>
				<pathelement location="${dist.dir}/key.util.jar"/>
				<pathelement location="${basedir}/../key.util.test/lib/junit-4.12.jar"/>
				<pathelement location="${basedir}/../key.util.test/lib/hamcrest-core-1.3.jar"/>
			</classpath>
		</javac>
	</target>

	<target name="clean" description="Deletes all generated files and folders.">
		<delete failonerror="false" includeemptydirs="true"> 
			<fileset dir="${build.dir}" includes="**/*" />
		</delete>
	</target>
</project>
