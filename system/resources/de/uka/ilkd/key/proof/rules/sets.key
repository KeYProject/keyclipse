\sorts {
    Set;
}

\functions {
    Set empty;
    Set singleton(any);
    Set union(Set, Set);
    Set intersect(Set, Set);
    Set setMinus(Set, Set);
    Set setComprehension{false, true}(Set, any);    
}

\predicates {
    elementOf(any, Set);
    subset(Set, Set);
    disjoint(Set, Set);
}


\rules {
 
    //--------------------------------------------------------------------------
    //axioms for elementOf
    //--------------------------------------------------------------------------
   
    elementOfEmpty {
        \schemaVar \term any e;
        
        \find(elementOf(e, empty))
        
        \replacewith(false)
        
        \heuristics(concrete)
    };
    

    elementOfSingleton {
        \schemaVar \term any e, e2;
        
        \find(elementOf(e, singleton(e2)))
        
        \replacewith(e = e2)
        
        \heuristics(simplify)
    };
    
    
    elementOfUnion {
        \schemaVar \term any e;
        \schemaVar \term Set s, s2;
        
        \find(elementOf(e, union(s, s2)))
        
        \replacewith(elementOf(e, s) | elementOf(e, s2))
        
        \heuristics(simplify)
    };
    
    
    elementOfIntersect {
        \schemaVar \term any e;
        \schemaVar \term Set s, s2;
        
        \find(elementOf(e, intersect(s, s2)))
        
        \replacewith(elementOf(e, s) & elementOf(e, s2))
        
        \heuristics(simplify)
    };
    
        
    elementOfSetMinus {
        \schemaVar \term any e;
        \schemaVar \term Set s, s2;
        
        \find(elementOf(e, setMinus(s, s2)))
        
        \replacewith(elementOf(e, s) & !elementOf(e, s2))
        
        \heuristics(simplify)
    };
    
    
    elementOfSetComprehension {
        \schemaVar \term any e, t;
	\schemaVar \variables alpha av;
	\schemaVar \term Set s;
        
        \find(elementOf(e, setComprehension{av;}(s, t)))
        \varcond(\notFreeIn(av, s), \notFreeIn(av, e))
        
        \replacewith(\exists av; (elementOf(t, s) & t = e))
        
        \heuristics(simplify)
    };
    
    
    
    //--------------------------------------------------------------------------
    //axioms for equality, subset, disjoint (reduce to elementOf)
    //--------------------------------------------------------------------------
    
    equalityToElementOf {
    	\schemaVar \term Set s, s2;
	\schemaVar \variables any av;    	
    	
    	\find(s = s2)
	\varcond(\notFreeIn(av, s, s2))
	
    	\replacewith(\forall av; (elementOf(av, s) <-> elementOf(av, s2)))
    };


    subsetToElementOf {
        \schemaVar \term Set s, s2;
	\schemaVar \variables any av;    	
        
        \find(subset(s, s2))
	\varcond(\notFreeIn(av, s, s2))
	
	\replacewith(\forall av; (elementOf(av, s) -> elementOf(av, s2)))
	
        \heuristics(simplify)
    };

    
    disjointToElementOf {
        \schemaVar \term Set s, s2;
	\schemaVar \variables any av;    	
        
        \find(disjoint(s, s2))
	\varcond(\notFreeIn(av, s, s2))
	
        \replacewith(\forall av; (!elementOf(av, s) | !elementOf(av, s2)))
        
        \heuristics(simplify)
    };

    
    //--------------------------------------------------------------------------
    //lemmata for empty
    //--------------------------------------------------------------------------
    
    unionWithEmpty1 {
        \schemaVar \term Set s;
        
        \find(union(s, empty))
        
        \replacewith(s)
        
        \heuristics(concrete)
    };
    
    
    unionWithEmpty2 {
        \schemaVar \term Set s;
        
        \find(union(empty, s))
        
        \replacewith(s)
        
        \heuristics(concrete)
    };
    
    
    intersectWithEmpty1 {
        \schemaVar \term Set s;
        
        \find(intersect(s, empty))
        
        \replacewith(empty)
        
        \heuristics(concrete)
    };


    intersectWithEmpty2 {
        \schemaVar \term Set s;
        
        \find(intersect(empty, s))
        
        \replacewith(empty)
        
        \heuristics(concrete)
    };


    setMinusWithEmpty1 {
        \schemaVar \term Set s;
        
        \find(setMinus(s, empty))
        
        \replacewith(s)
        
        \heuristics(concrete)
    };


    setMinusWithEmpty2 {
        \schemaVar \term Set s;
        
        \find(setMinus(empty, s))
        
        \replacewith(empty)
        
        \heuristics(concrete)
    };
        
    
    subsetWithEmpty {
        \schemaVar \term Set s;
        
        \find(subset(empty, s))
        
        \replacewith(true)
        
        \heuristics(concrete)
    };
    
    
    disjointWithEmpty1 {
        \schemaVar \term Set s;
        
        \find(disjoint(empty, s))
        
        \replacewith(true)
        
        \heuristics(concrete)
    };
    
    
    disjointWithEmpty2 {
        \schemaVar \term Set s;
        
        \find(disjoint(s, empty))
        
        \replacewith(true)
        
        \heuristics(concrete)
    };
}
